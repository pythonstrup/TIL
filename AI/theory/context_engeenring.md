# 컨텍스트 엔지니어링

## 정의와 중요성

- 컨텍스트 엔지니어링은 대규모 언어 모델(LLM)의 추론 성능이 주어지는 컨텍스트 정보에 의해 결정된다는 전제에서 출발한 공식적인 학문 분야 
- 이는 단순한 프롬프트 설계를 넘어 LLM을 위한 정보 페이로드의 체계적인 최적화를 포함 
- LLM이 기본적인 명령어 수행 시스템에서 복잡한 애플리케이션의 핵심 추론 엔진으로 발전함에 따라, 정보 페이로드를 설계하고 관리하는 방법 또한 컨텍스트 엔지니어링이라는 공식적인 분야로 진화.
- 원래 컨텍스트를 단일하고 정적인 텍스트 문자열로 봤으나, 현대 시스템에는 불충분하다고 보고 컨텍스트를 동적으로 구성된 정보 구성 요소들의 집합으로 재개념화
    - 복잡한 함수에 의해 생성, 필터링, 포맷팅. 마지막에 조립 함수로 조정

### 구분

- 2가지 주요 범주로 분류

#### 1. Foundational Components

- 컨텍스트 검색 및 생성 (Context Retrieval and Generation)
  - 프롬프트 엔지니어링 및 컨텍스트 생성
  - 제로샷 및 퓨샷 학습 패러다임
  - Chain-of-Thought: 
    - Tree-of-Thought: 추론을 탐색, 선행 예측, 백트래킹 기능을 갖춘 계층적 구조로 구성 
    - Graph-of-Thought: 추론을 정점(생각)과 가장자리(의존성)를 가진 임의의 그래프로 모델링
  - 인지 아키텍처 통합
  - 외부 지식 검색
- 컨텍스트 처리 (Context Processing)
  - 긴 컨텍스트 처리
    - 아키텍처 혁신: Mamba, LongNet, FlashAttention, Ring Attention, YaRN
    - 위치 보간 및 컨텍스트 확장: Position Interpolation, Neural Tangent Kernel (NTK), LongRoPE, PoSE, Self-Extend
    - 최적화 기술: rouped-Query Attention (GQA), FlashAttention-2, Ring Attention, Sparse attention (S2-Attn, SF-Attn), Efficient Selective Attention (ESA), BigBird
  - 컨텍스트 자체 개선
  - 멀티모달 컨텍스트
  - 관계형 및 구조화된 컨텍스트
- 컨텍스트 관리 (Context Management)
  - 기본 제약 및 메모리 계층
  - 메모리 계층 및 저장 아키텍처
  - 컨텍스트 압축

#### 2. System Implementations

- 검색 증강 생성 (Retrieval-Augmented Generation, RAG)
- 메모리 시스템 (Memory Systems)
- 도구 통합 추론 (Tool-Integrated Reasoning)
- 다중 에이전트 시스템 (Multi-Agent Systems)

### 비유:

- 컨텍스트 엔지니어링은 마치 오케스트라의 지휘자가 되는 것과 같습니다. LLM 자체는 엄청난 잠재력을 가진 악기 연주자이지만, 제대로 연주하려면 정확한 악보(컨텍스트)가 필요
- 기본 구성 요소는 악보를 준비하는 과정입니다:
  - 컨텍스트 검색 및 생성은 적절한 음악적 아이디어(프롬프트, 외부 지식, 생각의 사슬)를 찾고 배열하는 것과 같습니다.
  - 컨텍스트 처리는 그 아이디어를 다듬고(긴 시퀀스 처리), 오류를 수정하며(자체 개선), 다양한 음색(멀티모달)이나 구조(구조화된 데이터)로 통합하는 과정입니다.
  - 컨텍스트 관리는 이 모든 음악적 아이디어를 효율적으로 저장하고 필요할 때 불러오는(메모리 계층, 압축) 것입니다.
- 시스템 구현은 이 모든 준비된 악보와 연주자를 통합하여 하나의 복잡한 공연을 만드는 것입니다:
  - RAG는 외부 라이브러리에서 영감을 얻어 곡을 풍부하게 만드는 것과 같습니다.
  - 메모리 시스템은 공연 중에도 과거의 감동적인 순간들을 기억하고 활용하는 능력을 부여합니다.
  - 도구 통합 추론은 연주자가 단순히 연주하는 것을 넘어, 특별한 악기나 음향 장비를 능동적으로 사용하여 공연의 한계를 뛰어넘는 것입니다.
  - 다중 에이전트 시스템은 여러 명의 지휘자나 솔로 연주자들이 서로 소통하며 하나의 거대한 심포니를 만들어내는 복잡한 협력입니다.
