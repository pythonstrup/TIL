# 1장 스터디 

계산 중심보다는 데이터 중심적인 것이 더 중요해진 것 같다.
- ex) 카프카 지원하는 기능이 너무 많아져서 사용하기 어려워짐 => 펄사가 대체재로 뜨고 있다.
- 패턴을 보는 것. 데이터가 쌓이는 속도. 관점을 바꿔서 생각해야 한다. (데이터 중심의 사고)
- 파티션과 트랜잭션. 애플리케이션에서 작업의 원자성을 보장하려면 결국 데이터에 대한 깊은 이해가 필요
- 어떻게 신뢰성을 확보하고, 시스템을 확장하며, 유지보수성을 확보할지?

왜 `데이터 시스템`이라는 포괄적인 용어를 사용해야 하는가?
- 분류간 경계가 흐려짐
- 단일 도구로 모든 데이터 문제를 해결하는 것이 불가능에 가까워짐.

신뢰성, 확장성, 유지보수성
- 이미 신뢰성이 위임되어 있다. (데이터베이스 시스템에서 알아서 다 해준다.)
- 저연차 때는 유지보수성 위주로 공부하지 않았나 (DDD, TDD 등)
- 가성비가 가장 좋은 건 확장성이 아닐까? (트래픽이 많은 대기업의 입장)
- 그래도 실무자 입장에서 가장 중요한 건 유지보수성이지 않을까? => 일하는 시간을 줄여준다. (코드 가독성, 버그 해결 등)

로그 시스템 예시
- 로그의 양을 계산해서 트래픽의 양을 대략적으로 추정한 적이 있다고 함.
- 로그 덤프를 만들었다. ex) 30분간의 덤프를 떴을 경우, 로그의 최대 크기를 구한 다음 48 * 평균크기로 하루의 로그량을 구함. (최악의 경우로 계산)

스타트업의 입장
- 데이터 정합성이 하나 안 맞으면 전부 CS 처리를 해야 한다. 다 비용이다.
- 그래서 유지보수성보다 신뢰성이 더 중요하다고 생각했다.

----

## 신뢰성

- `결함(fault)`: 잘못될 수 있는 일
  - `내결함성(fault-tolerant)` or `탄력성 resilient`: 결함을 예측하고 대처할 수 있는 특성
- 내결함성 시스템에서 경고 없이 개별 프로세스를 무작위로 죽이는 것과 같이 고의적으로 결함을 일으켜 결함률을 증가시키는 방법
  - 내결함성을 지속적으로 테스트한다. => 넷플릭스의 `카오스 몽키 Chaos Monkey`
- 신뢰성은 사용자에 대한 책임

## 확장성

- 확장성: 증가한 부하에 대처하는 시스템 능력을 설명하는 용어
- 부하는 `부하 매개변수 load parameter`라고 부르는 몇 개의 숫자로 나타낼 수 있다.
  - 가장 적합한 부하 매개변수 선택은 시스템 설계에 따라 달라진다.
  - ex) 초당 요청 수, DB 읽기 대 쓰기 비율, 활성 사용자 수, 캐시 적중률 등
- 트위터의 사례
  - 사용자당 팔로워의 분포는 팬아웃 부하를 결정 => 핵심 부하 매개변수
- 응답시간
  - 일반적으로 산술평균보다는 백분위를 사용하는 편이 더 좋다. 특히 p95, p99, p999 값을 기준으로!!
  - `꼬리 지연 시간 tail latency`으로 알려진 상위 백분위 응답 시간은 서비스의 사용자 경험에 직접 영향을 주기 때문에 중요하다.
  - 백분위는 `서비스 수준 목표 SLO(Service Level Objective)`와 `서비스 수준 협약서 SLA(Service Level Agreement)`에 자주 사용하고 기대 성능과 서비스 가용성을 정의하는 계약에도 자주 등장한다.ㄴ
- 큐 대기지연은 높은 백분위에서 응답 시간의 상당 부분을 차지 
  - 소수의 느린 요청 처리만으로도 후속 요청 처리가 지체된다. => `선두 차단 head-of-line blocking`
- 다수의 장비를 분산하는 아키텍처를 `비공유 shared-nothing` 아키텍처라 한다.
- `범용적이고 모든 상황에 맞는 one-size-fits-all` 확장 아키텍처는 없다.

## 유지보수성

- 소프트웨어 비용의 대부분을 차지하는 유지보수.
- 유지보수 비용을 줄여주는 소프트웨어 설계 원칙 3가지
1. `운용성 operability`: 운영팀이 시스템을 원활하게 운영할 수 있도록 쉽게 만들기
2. `단순성 simplicity`: 새로운 엔지니어가 시스템을 쉽게 이해할 수 있게 만들기
   - 우발적 복잡도를 제거하기 위한 최상의 도구 = 추상화
3. `발전성 evolvability`: 시스템을 쉽게 변경할 수 있도록 만들기

## 스터디 내용

- "데이터 시스템의 기초가 되는 다양한 원리와 트레이드오프에 대해 논의하고 다양한 제품이 채택한 서로 다른 여러 설계 과정을 살펴본다." 
  - 결국 회사에 적용해보는 게 가장 중요하다고 생각!
- 

----

