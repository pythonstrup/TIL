# 9장 일반적인 프로그래밍 원칙 

- 자바 언어의 핵심 요소
- 지역변수, 제어구조, 라이브러리, 데이터 타입, 그리고 언어 경계를 넘나드는 기능인 리플렉션과 네이티브 메소드

## item57. 지역변수의 범위를 최소화하라.

- item15의 "클래스와 멤버의 접근 권한을 최소화하라"와 취지가 비슷.
- **지역변수의 범위를 줄이는 가장 강력한 기법은 역시 '가장 처음 쓰일 때 선언하기'다.**
- **거의 모든 지역변수는 선언과 동시에 초기화해야 한다.**
  - `try-catch`는 제외
- `while`보다는 `for`문
- **메소드는 작게 유지하고 한 가지 기능에 집중**

---

## item58. 전통적인 `for` 문보다는 `for-each` 문을 사용하라

- `iterator`나 전통적인 방법으로 변수를 선언하는 것보다는 아래 방식이 더 낫다. (enhanced `for` statement)
  - 하나의 관용구로 컬렉션과 배열을 모두 처리할 수 있어서 어떤 컨테이너를 다루는지는 신경쓰지 않아도 된다.

```java
for (Element e: elements) {
  // ...  
}
```

- 컬렉션을 중첩해 순회해야 한다는 `for-each` 문의 이점은 더욱 커진다.
- 하지만 안타깝게도 `for-each` 문을 사용할 수 없는 상황이 세 가지 존재한다.
1. 파괴적인 필터링: 순회하면서 선택된 원소를 제거해야 한다면, 반복자의 `remove`를 활용해야 한다. 자바8부터 `Collection`의 `removeIf` 메소드를 사용해 컬렉션을 명시적으로 순회하는 일을 피할 수 있다.
2. 변형: 원소의 값 일부 혹은 전체를 교체해야 하는 경우
3. 병렬 반복: 여러 컬렉션을 병렬로 순회해야 하는 경우

- `for-each`문은 컬렉션과 배열은 물론 `Iterable` 인터페이스를 구현한 객체라면 무엇이든 순회할 수 있다.

---

## item59. 라이브러리를 익히고 사용하라

- ex) `Random`
  - 자바 7부터는 `Random`을 더 이상 사용하지 않는 게 좋다. `ThreadLocalRandom`으로 대체. (속도도 3.6배 정도 더 빠르다고 함.)
  - 포크조인 풀이나 병렬 스트림에서는 `SplittableRandom`을 사용하라.
- 표준 라이브러리의 이점
1. **표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.**
2. 핵심적인 일과 크게 관련 없는 문제를 해결하느라 시간을 허비하지 않아도 된다.
3. 노력하지 않아도 성능이 지속해서 개선된다.
4. 기능이 점점 많아진다.
5. 여러분이 작성한 코드가 많은 사람에게 낯익은 코드가 된다. -> 유지보수성이 높아진다.

- 실상은 많은 프로그래머가 직접 구현해 쓰고 있다. 왜 그럴까?
  - 아마도 라이브러리에 그런 기능이 있는지 모르기 때문일 것이다.
  - **메이저 릴리스마다 주목할 만한 수많은 기능이 라이브러리에 추가된다.**
- 자바 프로그래머라면 적어도 `java.lang`, `java.util`, `java.io`와 그 하위 패키지들에는 익숙해져야 한다.
  - 여기에 더해 `java.util.concurrent`의 동시성 기능도 마찬가지로 알아두면 큰 도움이 된다.
- 최대한 라이브러리를 활용하되, 원하는 기능을 찾지 못하면 그 다음 선택지를 고품질의 서드파티 라이브러리로 하라.
  - ex) `Guava`
  - 적합한 서드파티 라이브러리도 찾지 못했다면, 다른 선택이 없으니 직접 구현하자.




<br/>

# 참고자료

- Effective Java 3/E, Joshua Bloch

