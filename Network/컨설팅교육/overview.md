# 네트워크 보안 컨설티

## 트래픽에 대한 이해

OSI 7계층 모델. 이 모델은 통신 과정을 7개의 단계로 나눈 것으로, 각 계층이 어떻게 상호작용하는지에 대한 설명

- L1 (물리 계층): 하드웨어, 즉 반도체 칩과 같은 물리적인 부분을 의미합니다. 삼성전자, SK하이닉스가 이 계층의 부품을 만든다.
- L2 (데이터 링크 계층): 이더넷(Ethernet)이 여기에 해당하며, MAC 주소를 사용해 같은 네트워크 내에서 통신한다.
- L3 (네트워크 계층): IP 주소를 사용해 다른 네트워크 간의 통신 경로를 설정한다.
- L4 (전송 계층): TCP가 이 계층에서 동작하며, 데이터 전송의 신뢰성을 보장한다.
- L5-L7 (세션, 표현, 응용 계층): 우리가 실제로 사용하는 애플리케이션(웹 브라우저 등)이 동작하는 영역이다.

### 패킷

사용자가 데이터를 보내면, 이 데이터는 OSI 모델을 따라 아래 계층으로 내려가면서 '포장'된다. 이 과정을 캡슐화라고 한다.

1. 시작: Application에서 "나는 왕이다"라는 원본 데이터(페이로드, Payload)가 생성된다. 
2. 데이터 앞에 L4(TCP) 정보가 담긴 **헤더(Header)**가 붙는다. 
3. 그 앞에 다시 L3(IP) 헤더가 붙는다. 
4. 마지막으로 L2(Ethernet) 헤더가 붙어 최종적인 데이터 패킷이 완성된다.

이렇게 각 계층의 정보가 담긴 헤더가 추가되어야 네트워크 장비들이 데이터를 올바른 목적지로 보낼 수 있다.

### 스위칭과 라우팅: 데이터의 여정

생성된 데이터 패킷은 스위치와 라우터를 통해 목적지까지 이동한다.
- 스위칭(Switching): 같은 망 안에서 일어나는 통신입니다. L2 스위치는 MAC 주소를 보고 데이터를 전달하며, 처리할 수 없는 데이터는 상위 장비(업링크)로 보낸다.
  - 주소는 각 장비에서 메모리에서 관리되고 있다.
  - 장비의 메모리에서 해당 주소를 찾을 수 없다면 브로드캐스트를 통해 주변 장비를 확인하며, 주소에 대한 정보를 얻으면 해당 경로로 안내한다. 
- 라우팅(Routing): 서로 다른 망을 건너갈 때 사용된다. L3 라우터(혹은 L3 스위치)가 IP 주소를 보고 최적의 경로를 결정한다. 데이터가 하나의 라우터를 거치는 것을 홉(Hop)이라고 하며, hop count를 넘으면 데이터는 소멸된다.

### Last Mile

- 정의: 통신 사업자의 전송망에서 시작하여 건물 내의 가구 단자함과 구내 선로를 거쳐 최종 사용자(가구 또는 개인 장치)까지 이어지는 마지막 1마일(약 1.6km) 내외의 짧은 통신 구간
- 기지국의 안테나
  - 코일로 감겨져 있는데, 지하까지 연결된다.
  - 안테나는 아날로그 데이터를 받고, 지하에 아날로그 디지털 컨버터가 있는데, 디지털로 바꿔서 유선으로 전달한다고 한다.
- 따라서 무선은 기지국까지만 유효하다. 기지국부터는 유선으로 연결되는 다른 영역이다. 사용자와 기지국까지의 통신 구간을 `Last Mile`이라고 표현한다.

## 보안

### 1. 외부 보안: 방화벽

1. 방화벽(Firewall): 네트워크의 가장 앞단에서 L2~L4 정보를 기반으로 (IP 주소 등) 허용되지 않은 트래픽을 차단한다. 
2. 웹 방화벽(WAF): 방화벽을 통과한 트래픽 중 웹 서비스(L5-L7)를 겨냥한 공격을 탐지하고 차단한다. 예를 들어, SQL 인젝션 공격은 WAF를 통해 막을 수 있다.

### 2. 내부 보안: 침입 탐지/방지 시스템(IDS/IPS)

- `IDS (탐지)`: 내부망에 들어온 트래픽을 감시하다가 이상한 패턴을 발견하면 경고 알람을 보낸다.
- `IPS (방지)`: 이상 트래픽을 탐지할 뿐만 아니라 직접 차단까지 수행한다.

### 3. 접근 제어 NAC

- 허가된 사용자나 기기만 네트워크에 접속할 수 있도록 통제한다. 
- 흔히 VPN 같은 기술이 여기에 속한다.

### 4. 유해 차단

- 업무와 무관한 사이트(주식, 도박 등) 접속을 막아 내부 보안을 강화

### 5. 정보 유출 방지 DLP

- 내부 직원에 의한 회사 기밀 정보 유출을 막는 것이 주 목적이며, 주로 이메일이나 파일 전송을 감시

### 6. 취약점 분석

- 우리 시스템의 어떤 부분이 보안에 취약한지 지속적으로 점검하고 분석하는 활동

### 7. 통합 의사 결정

- 여러 보안 장비에서 수집된 정보를 종합하여 관리자가 더 빠르고 정확한 보안 결정을 내리도록 돕는 시스템


